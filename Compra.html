<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda de Jabones</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-green-50 font-sans">  <!-- Encabezado -->  <nav class="bg-green-800 p-4 shadow-lg sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
      <a href="#" class="text-white text-2xl font-bold flex items-center">
        <img src="https://via.placeholder.com/50" alt="Logo" class="h-10 w-10 mr-2 rounded-full">
        Tienda de Jabones
      </a>
    </div>
  </nav>  <!-- Productos -->  <h1 class="text-3xl text-center text-green-800 font-semibold mt-6 mb-4">Nuestros Productos</h1>
  <div class="max-w-xl mx-auto space-y-4">
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
      <span>Jabón de Lavanda - $3.00</span>
      <button onclick="comprar('Jabón de Lavanda', 3.00)" class="bg-green-600 text-white px-4 py-2 rounded">Comprar</button>
    </div>
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
      <span>Jabón de Aloe Vera - $3.50</span>
      <button onclick="comprar('Jabón de Aloe Vera', 3.50)" class="bg-green-600 text-white px-4 py-2 rounded">Comprar</button>
    </div>
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
      <span>Jabón de Miel - $4.00</span>
      <button onclick="comprar('Jabón de Miel', 4.00)" class="bg-green-600 text-white px-4 py-2 rounded">Comprar</button>
    </div>
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
      <span>Jabón de Coco - $4.50</span>
      <button onclick="comprar('Jabón de Coco', 4.50)" class="bg-green-600 text-white px-4 py-2 rounded">Comprar</button>
    </div>
    <div class="bg-white p-4 rounded shadow flex justify-between items-center">
      <span>Jabón de Piedra - $10.00</span>
      <button onclick="comprar('Jabón de Piedra', 10.00)" class="bg-green-600 text-white px-4 py-2 rounded">Comprar</button>
    </div>
  </div>  <!-- Botones -->  <div class="text-center my-6">
    <button id="finalizar" onclick="mostrarFactura()" class="hidden bg-blue-600 text-white px-6 py-2 rounded">Finalizar Compra</button>
    <button id="descargarPDF" onclick="generarPDF()" class="hidden bg-red-600 text-white px-6 py-2 rounded">Descargar PDF</button>
  </div>  <!-- Factura -->  <div id="factura" class="hidden max-w-3xl mx-auto bg-white p-6 rounded shadow mb-12">
    <div id="contenidoFactura">
      <div class="flex justify-between items-center mb-4">
        <img src="https://via.placeholder.com/150x60?text=LOGO" id="logo" alt="Logo" class="h-12">
        <div class="text-sm text-right">
          <strong>Tienda de Jabones</strong><br>
          contacto@jabones.com<br>
          Tel: +54 9 123 456 789
        </div>
      </div>
      <div class="text-sm mb-4">
        <p><strong>Fecha:</strong> <span id="fechaFactura"></span></p>
        <p><strong>Número de Factura:</strong> <span id="numeroFactura"></span></p>
      </div>
      <table class="w-full text-sm border border-gray-300">
        <thead>
          <tr class="bg-gray-100">
            <th class="border px-2 py-1">Producto</th>
            <th class="border px-2 py-1">Precio</th>
            <th class="border px-2 py-1">Cantidad</th>
            <th class="border px-2 py-1">Subtotal</th>
          </tr>
        </thead>
        <tbody id="detalleFactura"></tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-right font-bold px-2 py-1">Total:</td>
            <td id="totalFactura" class="border px-2 py-1">$0.00</td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>  <!-- Pie de página -->  <footer class="bg-green-800 text-white text-center py-4">
    <p>&copy; 2025 Jabones Artesanales - Hecho por alumnos 3º1 - CENS 452.</p>
  </footer>  <script>
    let carrito = [];
    let contadorFactura = parseInt(localStorage.getItem('contadorFactura')) || 1;

    function comprar(nombre, precio) {
      const producto = carrito.find(p => p.nombre === nombre);
      if (producto) {
        producto.cantidad += 1;
        producto.subtotal = producto.cantidad * producto.precio;
      } else {
        carrito.push({ nombre, precio, cantidad: 1, subtotal: precio });
      }

      Swal.fire({
        icon: 'success',
        title: 'Producto agregado',
        text: `${nombre} agregado al carrito.`,
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 2000,
        timerProgressBar: true,
        background: '#28a745',
        color: '#fff',
      });

      document.getElementById('finalizar').classList.remove('hidden');
    }

    function mostrarFactura() {
      const tabla = document.getElementById('detalleFactura');
      tabla.innerHTML = '';
      let total = 0;

      carrito.forEach(p => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td class="border px-2 py-1">${p.nombre}</td>
          <td class="border px-2 py-1">$${p.precio.toFixed(2)}</td>
          <td class="border px-2 py-1">${p.cantidad}</td>
          <td class="border px-2 py-1">$${p.subtotal.toFixed(2)}</td>
        `;
        tabla.appendChild(fila);
        total += p.subtotal;
      });

      document.getElementById('totalFactura').textContent = `$${total.toFixed(2)}`;
      document.getElementById('factura').classList.remove('hidden');
      document.getElementById('descargarPDF').classList.remove('hidden');

      const hoy = new Date();
      document.getElementById('fechaFactura').textContent = hoy.toLocaleDateString();
      const numero = 'FAC-' + contadorFactura.toString().padStart(6, '0');
      document.getElementById('numeroFactura').textContent = numero;
      contadorFactura++;
      localStorage.setItem('contadorFactura', contadorFactura);
    }

    function generarPDF() {
      const factura = document.getElementById('factura');
      const contenido = document.getElementById('contenidoFactura');
      factura.classList.remove('hidden');

      const opt = {
        margin: 10,
        filename: 'factura_jabones.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(contenido).save();
    }
  </script></body>
  </html>
